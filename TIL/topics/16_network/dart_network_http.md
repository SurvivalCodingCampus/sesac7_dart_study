# 네트워크 통신

### URL을 사용한 고수준 액세스

- 고수준 : 사람이 이해하기 쉽게 작성된 프로그램 또는 API

    URI ⇒ URL, URN

## HTTP 개념

- Hyper Text Transfer Protocol
- 서버와 클라이언트가 텍스트, 이미지, 동영상등 데이터를 주고 받을 때 사용하는 프로토콜로 확장됨
- 웹 상에서 보는 이미지, 영상, 파일과 같은 바이너리 데이터도 HTTP 멀티파트나 Base64 인코딩하여 사용

## 무상태성

- HTTP 는 상태 비저장 프로토콜
- HTTP는 요청 메시지를 보내기 직전까지 대상 컴퓨터가 응답 가능한지 알 방법이 없음
- Stateless 프로토콜, 즉 상태가 없는 프로토콜이라고 함
- Stateful 프로토콜로는 TCP (Transmission Control Protocol)가 있음

### 실무에서의 HTTP 응답 없음

- 실제로 서버가 제대로 처리를 했어도 응답이 늦게 와서 타임아웃 나는 경우도 있음
- Android의 경우 10초 이내에 응답이 없으면 타임아웃으로 간주함
- iOS 의 경우 60초

## Socket을 사용한  저수준 액세스

- 저수준 : 컴퓨터가 이해하기 쉽게 작성된 프로그램 또는 API
- TCP / UDP 를 추상화한 개발자를 위한 API
- Socket은 프로토콜이 아님
- 그래서 OSI 7계층에 포함되지 않는다

## TCP

- 신뢰성 있는 연결지향성 앱에서 사용 (이메일, 파일 전송, 웹브라우저)
- Stateful 프로토콜
- 연결되면 연결을 끊기 전까지 계속 메시지를 주고 받는 프로토콜
- 한쪽에 문제가 생기면 다른쪽에서 감지 가능

## UDP

- 신속한 데이터 전송이나 손실 가능성이 있는 상황에 주로 사용
- 비연결형 프로토콜
- 데이터 전달 보장이 안되어 신뢰성이 낮음

## 요청 메서드

- 요청의 형태를 정의하는 키워드
- 상황에 맞게 사용하는 것이 관례
    - GET : 데이터 요청
    - POST : 데이터가 포함된 요청
    - DELETE : 삭제
    - PUT : 전부 업데이트
    - PATCH : 일부 업데이트

### GET

- 일반적으로 웹 브라우저가 서버에 웹 페이지를 요청할 때 사용
- 읽기 요청
- body를 포함할 수 없음
- ?와 & 문자를 사용하는 **쿼리 파라미터**를 추가할 수 있다

### POST

- 웹브라우저로 테스트 불가
- 클라이언트에서 서버로 **데이터**가 포함된 요청을 보낼 때 사용
- 로그인, 주문 요청 등
- 쿼리 파라미터뿐만 아니라 body로 데이터 전송

### DELETE, PUT, PATCH

- 웹브라우저로 테스트 불가
- DELETE : 삭제
- PUT : 전체 업데이트
- PATCH : 일부 업데이트

### 안드로이드 스튜디오 HTTP Client 플러그인 사용

- 테스트 편하다
- git에 올릴 수 있기 때문에 협업에 편하다
- 안드로이드 스튜디오 m이상부터 지원

## HTTP 요청 헤더

- 요청 정보를 파악하는 데 도움이 되는 다른 여러 정보를 포함할 수 있음
- 주로 인증, 캐싱, 클라이언트 힌트, 조건, 연결 관리, 쿠키, CORS 등에 활용
- JSON 파일을 주고 받을 때 Content-Type 에 application/json 으로 명시

## 상태 코드

- 모든 HTTP 응답에는 상태 코드와 상태 메시지가 있음 (암묵적인 약속)
- 200 OK
- 400 Bad Request
- 404 Not Found
- 500 Internal Server Error
- 등등

## 세션과 쿠키

- HTTP는 상태라는 개념이 존재하지 않기 때문에 세션과 쿠키를 사용해 구분
- 주로 웹에서 서버는 세션, 클라이언트는 쿠키를 통해 상태 저장
- 모바일에 없는 개념 : SharedPreference 등으로 구현

## RESTful API

- 서버와 클라이언트가 메시지를 주고받을 때 가장 많이 사용하는 통신 규격 (암묵적인 룰)
- REST (Representational state transfer)
- RESTful 이란 REST 조건을 만족한다는 뜻이다

## HTTP 통신을 위한 라이브러리

- http (근본)
- dio (중국산) , 얘도 많이 씀
- retrofit (데이터 소스 작성용 magic), 안드로이드 개발자들이 좋아함, dio에 의존함